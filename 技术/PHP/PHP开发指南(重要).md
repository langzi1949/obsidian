#PHP #asdf

> æœ¬æ–‡æ¡£æ˜¯Macä¸‹PHPçš„å¼€å‘ç¯å¢ƒçš„æ­å»ºæŒ‡å—
# 1. ç¯å¢ƒå‡†å¤‡

## 1. ğŸ§°  å®‰è£…PHP (ä½¿ç”¨asdfè¿›è¡Œç‰ˆæœ¬ç®¡ç†)

```bash
# å®‰è£…asdf (éœ€è¦è¿›è¡Œç¯å¢ƒå˜é‡å†™å…¥./zshrcä¸­ï¼Œè‡ªè¡ŒæŸ¥è¯¢)
brew install asdf
# å®‰è£…phpä¾èµ–
brew install autoconf bison re2c libxml2 openssl@3 curl icu4c pcre2 zlib bzip2
# å®‰è£…phpçš„æ’ä»¶
asdf plugin add php
# å¯ä»¥çœ‹ä¸€ä¸‹phpå½“å‰çš„ç‰ˆæœ¬åˆ—è¡¨
asdf list all php
# ç„¶åé€‰æ‹©ä¸€ä¸ªç‰ˆæœ¬è¿›è¡Œå®‰è£…ï¼Œæ¯”å¦‚8.4.7ç‰ˆæœ¬
asdf install php 8.4.7
```
	ğŸ“Œ è¡¥å……æ³¨æ„ï¼š ä½¿ç”¨`asdf`å®‰è£…phpçš„æ—¶å€™ä¼šé¡ºä¾¿å®‰è£…äº†`composer`(ç±»ä¼¼mavenåŒ…ç®¡ç†çš„å·¥å…·)ï¼Œä½†æ˜¯composeræœ€å¥½æ˜¯å…¨å±€çš„ï¼Œä¸ç”¨ç»‘å®šåœ¨æŸä¸ªphpç‰ˆæœ¬ä¸‹ï¼Œå› ä¸ºä¾èµ–çš„ç¬¬ä¸‰æ–¹åŒ…è·Ÿphpç‰ˆæœ¬æ— å…³ï¼Œæ‰€ä»¥å°±éœ€è¦å®‰è£…`composer`åŒæ—¶åˆ é™¤asdfä¸‹çš„composer
	
```bash
# ä¸‹è½½ Composer å®‰è£…å™¨
php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');"

# è¿è¡Œå®‰è£…å™¨ï¼Œå°†å…¶å®‰è£…åˆ° /usr/local/bin æˆ–æŸä¸ªä½ å¸Œæœ›çš„ä½ç½®
# è¿™ä¼šä½¿ Composer åœ¨æ‰€æœ‰ PHP ç‰ˆæœ¬ä¸‹éƒ½å¯ç”¨
sudo php composer-setup.php --install-dir=/usr/local/bin --filename=composer

# æ¸…ç†å®‰è£…æ–‡ä»¶
php -r "unlink('composer-setup.php');"

# è¿›å…¥asdfçš„phpä¸‹å°†composeråˆ é™¤æˆ–è€…é‡å‘½å
mv $Home/.asdf/shims/composer $Home/.asdf/shims/composer.bak
mv $Home/.asdf/installs/php/8.4.7/bin/composer $Home/.asdf/installs/php/8.4.7/bin/composer.bak

# é‡æ–°åˆ·æ–°asdf
asdf reshim

# éªŒè¯å®‰è£…
composer --version
```

## 2. ğŸšœ å®‰è£…Laravel Valet(é€šè¿‡composer)

```bash
composer global require laravel/valet
export PATH="$HOME/.composer/vendor/bin:$PATH"  # ~/.zshrc ä¸­æ·»åŠ 
source ~/.zshrc
valet install
```

## 3. â›± å®‰è£…è°ƒè¯•å·¥å…·xdebug

```bash
# ä½¿ç”¨asdfå®‰è£…çš„phpä¼šè‡ªåŠ¨å®‰è£…äº†peclï¼Œå¯ä»¥checkä¸€ä¸‹  which pecl
pecl install xdebug
# å¦‚æœè¦è¾“å‡ºå¿…è¦çš„ä¿¡æ¯çš„è¯ï¼Œå¯ä»¥è¯•è¯•å‘½ä»¤
# pecl install xdebug -v
# é…ç½®php.ini
# php.ini ä¸€èˆ¬åœ¨~/.asdf/installs/php/<version>/conf.d/ ä¸‹
cd ~/.asdf/installs/php/8.4.7/conf.d/
```

ç¼–è¾‘`php.ini`æ–‡ä»¶

```bash
[XDebug] 
zend_extension="xdebug.so"
xdebug.mode=debug 
xdebug.start_with_request=yes 
xdebug.client_host=127.0.0.1 
xdebug.client_port=9003 
xdebug.discover_client_host=true
```

> [!tips]
> `pecl`å‘½ä»¤æ˜¯å•¥ï¼Ÿ æ˜¯ç®¡ç†PECLå­˜å‚¨åº“ä¸­çš„PHPæ‹“å±•çš„ï¼Œä¸€èˆ¬ç”¨äºå®‰è£…C/C++ç¼–å†™çš„æ‰©å±•ã€‚
> åŒæ—¶ï¼Œä¸åŒç‰ˆæœ¬çš„peclæ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥peclæ˜¯è·Ÿç€PHPç‰ˆæœ¬è¿›è¡Œç»‘å®šçš„ï¼Œéœ€è¦æ³¨æ„

## 4. ğŸŸ ä½¿ç”¨valetåˆ›å»ºLaravelé¡¹ç›®

å®‰è£…Laravelé¡¹ç›®æœ€å¸¸è§çš„æ–¹å¼å°±æ˜¯**Park** å’Œ **Link** 

* ä½¿ç”¨`valet park`æ–¹å¼
```bash
cd ~/phpworkspace/é¡¹ç›®æ ¹ç›®å½•
# ä¼šå°†æ ¹ç›®å½•ä¸‹æ‰€æœ‰çš„å­ç›®å½•ä½œä¸ºç‹¬ç«‹çš„ç½‘ç«™æä¾›æœåŠ¡ï¼Œç›¸å½“äºä¸€æ¬¡æ€§ç®¡ç†å¤šä¸ªæœåŠ¡
valet park
# é‡‡ç”¨composeråˆ›å»ºé¡¹ç›®
composer create-project  --prefer-dist laravel/laravel my-laravel-app
```

ç„¶åå°±å¯ä»¥åœ¨æµè§ˆå™¨è®¿é—®  [`http://my-laravel-app.test`](`http://my-laravel-app.test`)

* ä½¿ç”¨`valet link`æ–¹å¼
```bash
# è‡ªè¡Œå…ˆåˆ›å»ºä¸€ä¸ªLaravelé¡¹ç›®
composer create-project laravel/laravel my-laravel-app
cd my-laravel-app
# æ‰§è¡Œlink
valet link [custom-name-for-app] # å¯ä»¥ä¸æŒ‡å®šåç§°ï¼Œä¸æŒ‡å®šçš„è¯å°±æ˜¯å½“å‰ç›®å½•åç§°
```

æ­¤æ—¶åŒæ ·å¯ä»¥åœ¨æµè§ˆå™¨ä¸Šè®¿é—® [http://my-laravel-app.test](http://my-laravel-app.test)

> è¡¥å……ä¸€ä¸‹ï¼šå¦‚æœæƒ³çœ‹valetæœ‰å“ªäº›å‘½ä»¤ï¼Œç›´æ¥`valet`ä¸€ä¸‹ï¼Œä¼šå±•ç¤ºå‘½ä»¤åˆ—è¡¨

## 5. ğŸ‘¨ğŸ¿â€ğŸ¦± å®‰è£…vs codeçš„PHPæ’ä»¶

| æ’ä»¶                         | è¯´æ˜           |
| -------------------------- | ------------ |
| PHP Intelephense           | è¯­æ³•æ£€æŸ¥         |
| PHP Debugï¼ˆ+ Xdebugï¼‰        | è°ƒè¯•           |
| Laravel Extra Intellisense | Laravel æ™ºèƒ½æç¤º |
| Laravel Artisan            | Laravel å‘½ä»¤æ‰§è¡Œ |
| Laravel Blade Snippets     | Blade æ–‡ä»¶æ”¯æŒ   |
| Laravel goto view          | å¿«é€Ÿè·³è½¬è§†å›¾       |
ç›¸å…³çš„`setting.json`æ–‡ä»¶ï¼Œè¯·å‚è€ƒç¬¬ä¸€ä¸ªé¡¹ç›®hello-word

## 6. å¼€å§‹å¼€å‘PHPé¡¹ç›®å§

ä½œä¸ºPHPçš„æ–°æ‰‹ï¼Œå¯ä»¥ç›´æ¥å…ˆåˆ›å»ºä¸€ä¸ªlearningç›®å½•ï¼Œç”¨äºå­¦ä¹ phpçš„å„ç§è¯­æ³•ç­‰ï¼Œç”¨`valet link`ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸ŠæŸ¥çœ‹è¿è¡Œçš„ç»“æœä¿¡æ¯

# 2. Laravelé¡¹ç›®çš„ç»“æ„

![[Pasted image 20250911151233.png\|700]]

==å¤§è‡´è®²ä¸€ä¸‹ï¼Œæµè§ˆå™¨å‘èµ·è¯·æ±‚åï¼Œæ•´ä¸ªçš„é“¾è·¯æµç¨‹æ˜¯å•¥ï¼Ÿï¼ˆåªé’ˆå¯¹SPAå•é¡µé¢åº”ç”¨ï¼‰==

æµè§ˆå™¨è®¿é—® ->  åç«¯`Laravel`è·¯ç”±(routesç›®å½•ä¸‹) -> æ‰¾åˆ°`views`ä¸­çš„bladeæ¨¡æ¿æ–‡ä»¶ -> è¿”å›HTMLå¤–å£³ 
-> æµè§ˆå™¨æ¥åˆ°åç«¯è¿”å›çš„HTMLå -> å‰ç«¯åŠ è½½`vueåº”ç”¨` -> `vue router`è¿›è¡Œæ¸²æŸ“ç»„ä»¶  -> åç»­çš„é€»è¾‘å°±è·Ÿæˆ‘ä»¬ä¹‹å‰å¼€å‘å‰ç«¯ä¸€è‡´ã€‚

# 3. ä½¿ç”¨Phpstorm

æˆ‘æ„Ÿè§‰ä½¿ç”¨vscodeå¼€å‘PHPä¼šéå¸¸éº»çƒ¦ï¼Œè€Œä¸”ï¼Œéœ€è¦é…ç½®çš„ä¸œè¥¿å¤ªå¤šäº†ï¼Œç›´æ¥ä½¿ç”¨Phpstormè¿›è¡Œå¼€å‘å§

## 3.1 é…ç½®phpç‰ˆæœ¬

ç›´æ¥è¿›å…¥åˆ°settingä¸­ï¼Œç„¶åè°ƒæ•´phpçš„ç‰ˆæœ¬å³å¯
![[Pasted image 20250911134645.png]]
## 3.2 é…ç½®npm

ç”¨ä¸Šé¢çš„`composer create-project  --prefer-dist laravel/laravel my-laravel-app`å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„laravelçš„é¡¹ç›®
- `--prefer-dist` è¿™ä¸ªè¡¨ç¤ºçš„**ä¼˜å…ˆä¸‹è½½å‹ç¼©çš„å‘è¡Œç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯cloneå®Œæ•´çš„Gitä»“åº“**

## 3.3  å®‰è£…ä¾èµ–å’Œè¿è¡Œ

**å®‰è£…é¡¹ç›®ä¾èµ–**
- `composer install`   -- ä¸‹è½½phpå’Œlaravelä¾èµ–çš„åŒ…
- `npm install`   -- è¿™ä¸ªæ˜¯ä¸‹è½½å‰ç«¯çš„ä¾èµ–åŒ…

**è¿è¡Œ**
- `npm run dev`  
	- è¿™ä¸ªæ˜¯è¿è¡Œçš„ä¸€ä¸ªå‰ç«¯çš„ä»£ç ï¼Œä»»åŠ¡å°±æ˜¯å¤„ç†å‰ç«¯èµ„æº
- `php artisan serve`
	- è¿™ä¸ªæ˜¯åç«¯æœåŠ¡ï¼Œç”¨äºå¤„ç†å„ç§è¯·æ±‚çš„
- å…¶å®å¯ä»¥ç›´æ¥ç”¨`composer.json`ä¸­çš„å‘½ä»¤å»è¿è¡Œ
	- `composer run dev`  å®ƒåŒ…å«äº†ä¸Šé¢äº†ä¸¤ä¸ªå‘½ä»¤ï¼ŒåŒæ—¶è¿˜åŒ…å«äº†æ—¥å¿—ç›‘æ§ç­‰

## 3.4 åˆ°åº•å¦‚ä½•è¿è¡ŒPHPä»£ç å‘¢ï¼Ÿ

é¦–å…ˆï¼ŒPHPæ˜¯ä¸€ä¸ªæœåŠ¡ç«¯è„šæœ¬è¯­è¨€ï¼Œåœ¨è¿è¡ŒPHPç«¯ä»£ç çš„æ—¶å€™ï¼Œéœ€è¦ä¸€ä¸ªæœåŠ¡å™¨ã€‚
å®ƒå·¥ä½œçš„åŸç†å°±æ˜¯  å½“ä¸€ä¸ªè¯·æ±‚åˆ°æœåŠ¡ç«¯æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šç”¨PHPè§£é‡Šå™¨æ¥æ‰§è¡Œä½ çš„ä»£ç ï¼Œç„¶åå°†ç”Ÿæˆçš„å†…å®¹æˆ–è€…HTMLè¿”å›ç»™æµè§ˆå™¨ã€‚
åœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤è¡ŒCLIæ¥æ‰§è¡ŒPHPä»£ç ã€‚

## 3.5  åº”è¯¥å¦‚ä½•debug

1. å®‰è£…å’Œé…ç½®Xdebug
	1. å‚è€ƒ[[PHPå¼€å‘æŒ‡å—(é‡è¦)#3. â›± å®‰è£…è°ƒè¯•å·¥å…·xdebug]]
2. åœ¨PhpStormä¸­é…ç½®
![[Pasted image 20250911143459.png]]
æ³¨æ„ï¼š Use Pathä¸€å®šè¦å‹¾é€‰
3. å¼€å§‹Debug
	1. ç›‘å¬è°ƒè¯•è¿æ¥ã€‚ åœ¨Phpstormçš„å³ä¸Šè§’ï¼Œä¼šçœ‹åˆ°ä¸€ä¸ªè™«å­çš„å›¾æ ‡ã€Start Listening for php debug connectionsã€
	2. ç‚¹å‡»ï¼Œè®©å®ƒå˜æˆç»¿è‰²ï¼Œè¡¨ç¤ºphpstormæ­£åœ¨ç­‰å¾…æ¥è‡ªxdebugçš„è°ƒè¯•è¿æ¥
	3. å…¶ä»–çš„æ“ä½œæ‡‚å¾—éƒ½æ‡‚

## 3.6 å®‰è£…æ’ä»¶

ä¼°è®¡åªéœ€è¦ä¸€ä¸ªæ’ä»¶å°±OKäº†ï¼Œå°±æ˜¯`Laravel IDE` è¿™ä¸ªæ’ä»¶

è‡³æ­¤phpstormçš„é…ç½®ä¹Ÿå®Œæˆäº†


# 4. æ— åŠ›åæ§½çš„åœ°æ–¹ ğŸ¤®ğŸ¤®ğŸ¤®

1. å˜é‡åå¿…é¡»åŠ ä¸Š`$`
2. ç±»æ–¹æ³•çš„è®¿é—®ç”¨`->`
3. å­—ç¬¦ä¸²çš„å¾ˆå¤šç”¨æ³•ï¼Œå±…ç„¶åŒºåˆ†å•å­—èŠ‚å’Œå¤šå­—èŠ‚å­—ç¬¦ä¸²ï¼Œæ— è¯­ï¼Œè¯´çš„å°±æ˜¯ä½ golang
4. å±…ç„¶ç”¨arræ¥è¡¨ç¤ºmapï¼Œç¥äººæƒ³å‡ºæ¥çš„
5. å˜é‡åå¤§å°å†™æ•æ„Ÿï¼Œä½†æ˜¯å‡½æ•°ï¼Œç±»è¿™äº›å±…ç„¶å¤§å°å†™ä¸æ•æ„Ÿï¼Œæˆ‘åªèƒ½è¯´æ¡è‰äº†
6. å­—ç¬¦ä¸²çš„æ‹¼æ¥å±…ç„¶ä½¿ç”¨`.`
7. å†…ç½®çš„å‡½æ•°ï¼Œå‘½åé£æ ¼éƒ½ä¸ç»Ÿä¸€ï¼Œä¸€ä¼šå„¿æ˜¯ä¸‹åˆ’çº¿é£æ ¼ã€ä¸€ä¼šå„¿æ˜¯å°é©¼å³°é£æ ¼
8. debugå¼‚å¸¸éº»çƒ¦ï¼Œå±…ç„¶è¿˜è¦é…ç½®å„ç§php.iniæ–‡ä»¶ï¼Œæ— è¯­
9. å¾ˆå¤šä¸­é—´ä»¶çš„æ‰©å±•éƒ½éœ€è¦`pecl`å®‰è£…
10. è‘—åçš„æ¢—  `PHP6`  -- PHP6å› ç”»é¥¼å¤ªå¤§æœ€ç»ˆé¡¹ç›®å–æ¶ˆäº†

# 5. æœªæ¥å¯èƒ½è¦å­¦ä¹ çš„æ¡†æ¶

- Laravel    æœ€æµè¡Œä¸”æœ€å‰é¢ï¼Œä½†æ˜¯æ€§èƒ½å¾ˆä¸€èˆ¬
- swoole    PHPçš„æ‹“å±•ï¼Œåº•å±‚ç”¨Cè¯­è¨€ç¼–å†™ï¼Œæä¾›å¼‚æ­¥ã€å¹¶è¡Œã€ä»¥åŠé«˜æ€§èƒ½çš„ç½‘ç»œç¼–ç¨‹èƒ½åŠ›
- webman   - åŸºäºswooleçš„ä¸€ä¸ªé«˜æ€§èƒ½webæ¡†æ¶