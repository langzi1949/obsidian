
### 一、获取当前时间

#### 1. `time()`：获取当前 Unix 时间戳
Unix 时间戳是从 **1970-01-01 00:00:00 UTC** 到现在的秒数，是时间处理的基础。
```php
echo time(); // 输出：1694563200（示例值，实际为当前秒数）
```

#### 2. `date()`：格式化当前时间为字符串
最常用的时间格式化函数，第一个参数为**格式字符串**，第二个参数可选（指定时间戳，默认当前时间）。
```php
// 格式：年-月-日 时:分:秒
echo date('Y-m-d H:i:s'); // 输出：2023-09-12 14:30:00（示例）
```

**常用格式符**：
- `Y`：四位年份（如 2023）
- `m`：两位月份（01-12）
- `d`：两位日期（01-31）
- `H`：24小时制小时（00-23）
- `i`：分钟（00-59）
- `s`：秒（00-59）
- `l`：星期全称（如 Monday）


### 二、时间戳与日期字符串的转换

#### 1. `strtotime()`：字符串转时间戳
将人类可读的日期字符串（如 `'2023-09-12'`、`'+1 day'`）转换为时间戳。
```php
$timestamp = strtotime('2023-09-12');
echo $timestamp; // 输出该日期的时间戳

// 相对时间
echo strtotime('+1 week'); // 一周后的时间戳
echo strtotime('last Monday'); // 上周一的时间戳
```

#### 2. `date()`：时间戳转字符串（前面已提及）
```php
$timestamp = 1694563200;
echo date('Y-m-d', $timestamp); // 输出：2023-09-12
```


### 三、获取详细时间信息：`getdate()`
返回包含日期和时间详细信息的关联数组（键包括 `year`、`month`、`mday`、`hours` 等）。
```php
$timeInfo = getdate();
print_r($timeInfo);
/* 输出示例：
Array (
    [seconds] => 30
    [minutes] => 45
    [hours] => 14
    [mday] => 12
    [wday] => 2
    [mon] => 9
    [year] => 2023
    [yday] => 254
    [weekday] => Tuesday
    [month] => September
    [0] => 1694564730
)
*/
```


### 四、日期计算与修改

#### 1. `strtotime()` 处理相对时间（推荐）
通过自然语言字符串直接计算相对时间：
```php
// 明天此时
echo date('Y-m-d H:i:s', strtotime('+1 day'));

// 30天后
echo date('Y-m-d', strtotime('+30 days'));

// 上个月今天
echo date('Y-m-d', strtotime('-1 month'));
```

#### 2. `DateTime` 类（面向对象方式，更灵活）
PHP 5.2+ 引入的 `DateTime` 类提供了更面向对象的时间处理方式，支持复杂计算。
```php
// 创建 DateTime 对象（当前时间）
$date = new DateTime();

// 修改时间（加 1 个月）
$date->modify('+1 month');
echo $date->format('Y-m-d'); // 输出：当前时间加1个月的日期

// 比较两个日期
$date1 = new DateTime('2023-09-01');
$date2 = new DateTime('2023-09-12');
$interval = $date1->diff($date2);
echo $interval->days; // 输出：11（相差11天）
```


### 五、时区设置
PHP 默认使用服务器时区，若需指定时区（如中国时区），可通过以下方式设置：

#### 1. 临时设置（脚本内）
```php
date_default_timezone_set('Asia/Shanghai'); // 设置为上海时区
echo date('Y-m-d H:i:s'); // 输出北京时间
```

#### 2. 全局设置（php.ini）
修改 `php.ini` 中的 `date.timezone` 配置：
```ini
date.timezone = Asia/Shanghai
```


### 六、常用场景示例

#### 1. 计算两个日期相差的天数
```php
$date1 = strtotime('2023-08-01');
$date2 = strtotime('2023-09-12');
$days = ($date2 - $date1) / (60 * 60 * 24); // 转换为天数
echo $days; // 输出：42
```

#### 2. 生成未来7天的日期列表
```php
for ($i = 0; $i < 7; $i++) {
    $date = date('Y-m-d', strtotime("+$i day"));
    echo $date . '<br>';
}
```

#### 3. 验证日期格式是否有效
```php
function isValidDate($date, $format = 'Y-m-d') {
    $d = DateTime::createFromFormat($format, $date);
    // 检查格式是否匹配且转换后的值与原字符串一致
    return $d && $d->format($format) === $date;
}

var_dump(isValidDate('2023-02-30')); // false（2月没有30日）
var_dump(isValidDate('2023-12-31')); // true
```


### 总结
| 需求场景                | 推荐函数/类                | 特点                                  |
|-------------------------|---------------------------|---------------------------------------|
| 获取当前时间戳          | `time()`                  | 简单直接，返回秒数                    |
| 格式化时间为字符串      | `date()`                  | 灵活的格式符，支持自定义输出          |
| 字符串转时间戳          | `strtotime()`             | 支持自然语言（如 `'+1 week'`）        |
| 复杂日期计算/比较       | `DateTime` 类 + `modify()` | 面向对象，支持间隔计算、时区处理等    |
| 获取详细时间信息        | `getdate()`               | 返回包含年、月、日等的数组            |

日常开发中，简单场景用 `time()` + `date()` + `strtotime()` 即可，复杂场景（如跨时区、精确间隔计算）推荐使用 `DateTime` 类，功能更强大且代码可读性更高。
