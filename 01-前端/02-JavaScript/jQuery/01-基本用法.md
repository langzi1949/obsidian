#前端 #JavaScript #jQuery

# 1. 引入Jquery


可以采用CDN的方式，也可以直接下载下来文件然后本地引入，在jQuery的3.x版本中有一个slim版本，他主要移除了Ajax和动画效果等。
参考官网：
[[https://releases.jquery.com/]]

**如何选择版本？**
- 如果是需要那些Ajax或者动画功能，可以使用full版本
- 如果不需要jquery的这些功能，用原生的API或者第三方库实现的话，可以用slim版本，取决于如何使用。

# 2. 简单的示例

原生的写法：
```js
window.addEventListener('load', () => {
  const btn1 = document.getElementById('btn1');
  btn1.addEventListener('click', () => {
    const username = document.getElementById('username').value;
    console.log(username);
  });
});
```

但是jQuery的写法是：
```js
$(() => {   // $是jQuery的核心函数，可以用jQuery替换这个$
  $('#btn2').click(() => {
    const username = $('#username').val();
    console.log(username);
  });
});
```

# 3. jQuery的2把利器

1. 核心函数  ： **$() 或者 jQuery()**
2. 核心对象 ：  核心函数返回的就是核心对象

# 4. $()函数的使用

1. 参数为函数，表示当DOM加载完成后，执行此回调函数
2. 参数为选择器字符串，表示要查找所有匹配的标签，并将它们封装成jQuery对象
3. 参数为DOM对象，表示将DOM对象封装成jQuery对象
4. 参数为html标签字符串，表示创建标签对象并封装成jQuery对象

```js
/* 参数为函数，表示当DOM加载完成后，执行此回调函数 */
$(() => {
  // 参数为选择器字符串，表示要查找所有匹配的标签，并将它们封装成jQuery对象
  $('#btn2').click((event) => {
    const username = $('#username').val();
    console.log(username);
    // 参数为DOM对象，表示将DOM对象封装成jQuery对象
    console.log($(event.target).html());
    // 参数为html标签字符串，表示创建标签对象并封装成jQuery对象
    $('<p>这是一个p</p>').appendTo('div');
  });
});
```

# 5. jQuery对象的使用

用`$.`作为对象进行调用，他提供了不依赖DOM元素的全局工具方法，而且那些属性和方法不会污染全局变量

## 5.1 遍历和迭代

- `$.each()` 

```js
const arr = ['a', 'b', 'c'];
$.each(arr, function(index, value) {
  console.log(`索引: ${index}, 值: ${value}`);
});

const obj = { one: 1, two: 2, three: 3 };
$.each(obj, function(key, value) {
  console.log(`键: ${key}, 值: ${value}`);
});
```

 ## 5.2 Ajax请求
 
```js
$.ajax({
  url: 'https://api.example.com/data',
  method: 'GET',
  dataType: 'json', // 预期返回的数据类型
  success: function(data) {
    console.log('数据请求成功:', data);
  },
  error: function(xhr, status, error) {
    console.error('请求失败:', error);
  }
});

/*可以使用快捷方式*/
$.get(url, successCallback)
$.post(url, data, successCallback)
$.getJSON(url, successCallback)
```

## 5.3 一些工具函数

```js
const str = '  hello world  ';
console.log($.trim(str)); // "hello world" 

console.log($.isArray([1, 2, 3])); // true
console.log($.isArray({a: 1})); // false

console.log($.isFunction(function(){})); // true

const obj1 = { a: 1, b: 2 };
const obj2 = { b: 3, c: 4 };
const merged = $.extend({}, obj1, obj2); // 合并到空对象
console.log(merged); // { a: 1, b: 3, c: 4 }
```

## 5.4 动画和效果

`$.fx` 对象包含动画效果相关的属性和方法

`$.fx.off = true`    禁用所有jQuery动画
相关API查看文档

## 5.5  自定义插件或者方法开发， 拓展jQuery的能力

### 5.5.1 `$.fn.extend()` 创建用于jQuery对象的插件，用于DOM操作

`$.fn`  是jQuery对象的原型(prototype)的别名，可以为所有jQuery对象添加新的方法

```js
// 为所有 jQuery 集合添加一个新的方法 `highlight`
$.fn.highlight = function() {
  this.css('background-color', 'yellow');
  return this; // 返回 `this` 以支持链式调用
};

// 现在你可以像使用其他 jQuery 方法一样使用它
$('#myDiv').highlight();


/*或者用第二种，通过$.fn.extend()进行统一管理*/
$.fn.extend({
   myFunction: function() {}
});
$('selector').myFunction();
```

### 5.5.2  `$.extend()` 创建全局的jQuery工具方法

```js
// 创建一个名为 myGlobalTool 的全局方法
$.extend({
  myGlobalTool: function(arr) {
    if (!$.isArray(arr)) {
      return null;
    }
    // `this` 在这里指代 jQuery 对象本身（即 $）
    return arr.map(item => item * 2);
  }
});

// 使用方式
const numbers = [1, 2, 3];
const doubledNumbers = $.myGlobalTool(numbers); // 调用全局方法
console.log(doubledNumbers); // 输出: [2, 4, 6]
```

## 5.6 有length属性 和  index()方法

```js
/**
 * 需求
 * 1. 统计一共有多少个按钮
 * 2. 去除第二个button的文本
 * 3. 输出所有button标签的文本
 * 4. 输入『测试三』是所有按钮中的第几个
 */

const $buttons = $('.n_btn_div button');
console.log($buttons.length);
// console.log();
console.log($buttons[1].textContent, $buttons.get(1).innerHTML);

$.each($buttons, (index, domEle) => {
  console.log(index, domEle.textContent);
});

// 另外一个遍历
$buttons.each(function () {
  console.log(this.textContent);
});

/**
 * index() 是这个元素在它同级别兄弟元素中是第几个？是所有的同级别的兄弟排名
 */
console.log($('#btn2').index());
```

# 6. 选择器

整体的选择的逻辑和CSS保持一致，不懂的可以看CSS的文档

## 6.1 有一些jQuery的特有选择器

- `:animated`  选择正在进行动画的严肃
- `:text`  获取所有的输入框
- `:button`  选中所有`<button>`元素和`type= "button"`的`<input>`元素
- `:checked`  选中所有被选中的复选框和表单按钮
- `:contains(text)`  选中所有包含指定文本的元素
- `:hidden`  选中所有被隐藏的元素`display:none`
- `:visible` 选中所有可见元素
- `[name!='']`  就是name不等于某个值， 但是这个效率没有原生的CSS好`not[name='']` ，如果极致性能的话用原生
- `:contains(text)`   选择元素文本包含某个字符串
- ~~`:eq(index) 或者 :eq(-index)`~~       这个eq的方法3.x已经被淘汰，应该用`$(selector).eq(index)`  这种方式
- ~~`:even`  或者 `:odd`~~  从0开始，找到奇数或者偶数的选择， 3.4+后过期，用`.filter(':even')`，比如`$('table tr').filter(':even')`
- ~~`:fisrt 或者:last`~~   第一个元素或者最后一个   同样3.4+后过期，应该采用`.filter(':first') 或者 .filter(':last') `
- ~~`:gt(index) 或者 :lt(index)`~~ 同样索引从0开始，找大于小于的逻辑，同样3.4+后过期， 用`.slice(start,end)` 这种逻辑
- `:has(selector)` 在子孙后代元素中是否包含某个选择器，性能不够好，用`$( "your-pure-css-selector" ).has( selector/DOMElement )`
- `:parent`  父元素   性能不好，应该采用`.filter(':parent')`
- `:password`   = `[type="password"]`   
- `:reset`  = `[type="reset"]`
- `:selected`     下拉框选中      性能不够，推荐使用`.filter(":selected")`


## 6.2 选择第二个和第三个`li`元素

- `eq()方法`，索引从0开始  `$('li:eq(1), li:eq(2)')`
- `:nth-child()` 标准的CSS伪类选择器，索引从1开始 `$('li:nth-child(2), li:nth-child(3)')`
- `slice()方法`  索引从0开始，包含start，不包含end， `$('li').slice(1, 3)`
- `lt()和gt()方法`   索引从0开始    `$('li:gt(0):gt(3)')`  最后得到1和2索引的数据

# 7. 示例

```js
 $(() => {
      $(`.title div`).eq(0).css('background', 'red');
      $('.title div').click((event) => {
        const index = $(event.target).index();
        // 先把所有的content下的div设置display : none
        // $('.content').css({ display: 'none' });
        // $('.content div').css({ display: 'none' });

        // 找到当前的
        $(`.title div`).eq(index).css('background', 'red');
        $(`.title div`).not(`:eq(${index})`).css('background', '');

        $('.content div').eq(index).css({ display: 'block' });
        $('.content div').not(`:eq(${index})`).css({ display: 'none' });
      });
    });
```





